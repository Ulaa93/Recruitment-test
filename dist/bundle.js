!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e){function n(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=document.querySelector(".appnew"),o=document.querySelector("#pagination"),a=document.querySelector("#search"),c=document.getElementsByTagName("th"),i=[],u=[],l=[],f=function(t){return fetch("".concat("https://recruitment.hal.skygate.io/incomes/").concat(t.id)).then((function(t){if(t.ok)return t.json();throw new Error("Something went wrong")})).then((function(e){var n=e.incomes.reduce((function(t,e){return t+parseFloat(e.value)}),0),r=n/e.incomes.length,o=i.findIndex((function(e){return e.id==t.id})),a=new Date(Math.max.apply(null,e.incomes.map((function(t){return new Date(t.date)}))));u=[],e.incomes.map((function(t){new Date(t.date).getMonth()===a.getMonth()&&new Date(t.date).getFullYear()==a.getFullYear()&&u.push(t)}));var c=u.reduce((function(t,e){return t+parseFloat(e.value)}),0);i[o].totalIncomes=n.toFixed(2),i[o].average=r.toFixed(2),i[o].lastMonth=c.toFixed(2)})).catch((function(t){return console.log(t)}))},d=1,s=50;function p(t,e,n,r){e.innerHTML="";for(var o=n*--r,a=o+n,c=t.slice(o,a),i=0;i<c.length;i++){var u=c[i],l=document.createElement("tr"),f="\n                <td>".concat(u.id,"</td>\n                <td>").concat(u.name,"</td>\n                <td>").concat(u.city,"</td>\n                <td>").concat(u.totalIncomes,"</td>\n                <td>").concat(u.average,"</td>\n                <td>").concat(u.lastMonth,"</td>\n             ");l.innerHTML=f,e.appendChild(l)}}function v(t,e,n){e.innerHTML="";for(var r=Math.ceil(t.length/n),o=1;o<r+1;o++){var a=m(o,t);e.appendChild(a)}}function m(t,e){var n=document.createElement("button");return n.innerText=t,d==t&&n.classList.add("active"),n.addEventListener("click",(function(){p(e,r,s,d=t),document.querySelector("button.active").classList.remove("active"),n.classList.add("active")})),n}document.addEventListener("load",fetch("https://recruitment.hal.skygate.io/companies").then((function(t){if(t.ok)return t.json();throw new Error("Something went wrong")})).then((function(t){return i=n(t)})).then((function(t){var e=!0,n=!1,a=void 0;try{for(var c,u=t[Symbol.iterator]();!(e=(c=u.next()).done);e=!0){var l=c.value;f(l).then((function(){p(i,r,s,d),v(i,o,s)}))}}catch(t){n=!0,a=t}finally{try{e||null==u.return||u.return()}finally{if(n)throw a}}})).catch((function(t){return console.log(t)}))),a.addEventListener("keyup",(function(){!function(){d=1,page=1,filterData=a.value.toUpperCase(),l=[];for(var t=0;t<i.length;t++)for(var e in i[t])i[t][e].toString().toUpperCase().includes(filterData)&&!l.includes(i[t])&&l.push(i[t])}(),p(l,r,s,d),v(l,o,s)}));for(var h=function(t){var e=!1,n=c[t].querySelector(".sort-icon");c[t].addEventListener("click",(function(){var u=Object.keys(i[0])[t];a.value="";for(var l=0;l<c.length;l++)c[l].querySelector("i")&&c[l]!=c[t]&&(c[l].querySelector(".sort-icon").innerHTML="",e=!1);(e=!e)&&(n.innerHTML='<i class="fas fa-sort-up"></i>'),e||(n.innerHTML='<i class="fas fa-sort-down"></i>'),function(t,e,n){d=1,page=1,t=t.sort((function(t,r){return"number"==typeof t[e]?n?t[e]-r[e]:r[e]-t[e]:"string"==typeof t[e]?n?t[e].localeCompare(r[e]):r[e].localeCompare(t[e]):void 0}))}(i,u,e),p(i,r,s,d),v(i,o,s)}))},y=0;y<c.length;y++)h(y)}]);